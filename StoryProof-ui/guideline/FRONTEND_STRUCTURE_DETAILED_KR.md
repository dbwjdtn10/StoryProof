# StoryProof 프론트엔드 상세 구조 및 기능 정의서 (last-backup 버전)

이 문서는 `StoryProof-last-backup/frontend` 프로젝트의 전체 디렉토리 구조와 각 파일이 담당하는 구체적인 기능을 상세히 설명합니다.

---

## 1. 디렉토리 구조 개요

```text
src/
├── api/          # 백엔드 API 통신 로직 및 데이터 타입 정의
├── components/   # 재사용 가능한 UI 컴포넌트 및 핵심 페이지 기능
│   ├── CharacterChat/ # 멀티 채팅방 시스템 관련 컴포넌트
│   ├── ui/       # Shadcn/UI 기반의 표준화된 디자인 컴포넌트 (48개)
│   └── figma/    # 디자인 프로토타입 연동 관련 유틸리티
├── contexts/     # 전역 상태 관리 (테마 등)
├── hooks/        # 커스텀 리액트 훅 (파일 처리 등)
├── styles/       # 전역 및 테마 스타일 CSS
└── types/        # 공통 타입 정의
```

---

## 2. 핵심 파일별 기능 상세 설명

### 2.1 주요 페이지 및 레이아웃 (`src/components/`)

| 파일명 | 구현 기능 및 역할 |
| :--- | :--- |
| **`App.tsx`** | **프로젝트의 메인 컨트롤러.** 로그인/회원가입 처리, 화면 전환(로그인 → 업로드 → 상세 정보) 및 전역 상태(사용자 모드)를 관리합니다. |
| **`Dashboard.tsx`** | **프로젝트 대시보드.** 소설의 전체 목록과 최근 작업 챕터를 카드 형태로 보여주며, 작가용 분석 도구와 독자용 가이드를 한눈에 확인하는 진입점입니다. |
| **`ChapterDetail.tsx`** | **애플리케이션의 핵심.** 소설 내용을 읽거나 쓰는 통합 환경을 제공합니다. 에디터와 사이드바(인물/장소/사건 사전)를 연결하고, 독서 모드 시 테마 변경 기능을 담당합니다. |
| **`FileUpload.tsx`** | **챕터 관리자.** 신규 파일을 업로드하고, 백엔드에서 진행되는 **AI 분석 상태(진행률 %)**를 실시간으로 폴링(Polling)하여 UI에 표시합니다. |

### 2.2 편집기 및 도구 모음 (`src/components/`)

| 파일명 | 구현 기능 및 역할 |
| :--- | :--- |
| **`NovelEditor.tsx`** | **Tiptap 기반 리치 에디터.** 글자 크기, 글꼴, 이미지 삽입, 표 만들기 등 문서 편집의 핵심 기능을 실제 구현하는 본체입니다. |
| **`WritingToolbar.tsx`** | **작가용 도구바.** 정렬, 체크리스트, 하이라이트 등 전문적인 집필에 필요한 고급 서식 도구를 제공합니다. |
| **`NovelToolbar.tsx`** | **기본 편집 도구.** 실행 취소(Undo), 다시 실행(Redo), 간단한 텍스트 스타일(굵게, 기울임 등)을 제어합니다. |
| **`ReaderToolbar.tsx`** | **독자 전용 설정.** 폰트 크기, 줄 간격, 배경색(화이트/세피아/다크)을 독자 취향에 맞게 조정하는 기능을 담당합니다. |

### 2.3 AI 및 사용자 설정 (`src/components/`)

| 파일명 | 구현 기능 및 역할 |
| :--- | :--- |
| **`SettingsModal.tsx`** | **사용자 환경 설정.** 로그인한 사용자의 정보 확인, 로그아웃, 그리고 분석에 사용할 **AI 모델(Gemini 2.0 Flash 등)을 동적으로 선택**하는 기능을 구현합니다. |
| **`AnalysisResultModal.tsx`** | **분석 리포트.** AI가 탐지한 설정 파괴, 개연성 부족 등의 결과를 팝업 형태로 보여주고, 해당 위치로 바로 이동하는 기능을 지원합니다. |
| **`ChatBot.tsx`** | **전역 AI 비서.** 어떤 화면에서든 질문을 던져 소설 설정에 대해 물어볼 수 있는 플로팅 챗봇입니다. |
| **`CharacterChat/`** | **캐릭터 대화방.** 소설 속 인물과 직접 대화하는 기능을 위해 대화방 생성(`CreateRoomModal`), 목록 확인(`RoomList`), 채팅창(`CharacterChatWindow`)이 유기적으로 작동합니다. |

---

## 3. 데이터 및 외부 통신 (`src/api/`)

- **`client.ts`**: Axios를 기반으로 한 기본 HTTP 클라이언트 설정. 인증 토큰(JWT) 삽입을 자동화합니다.
- **`novel.ts`**: 소설 생성, 챕터 업로드, **설정 바이블(Bible) 데이터** 조회 등 도메인 핵심 API를 집약하고 있습니다.
- **`auth.ts`**: 보안 관련 API(로그인, 가입, 본인 확인)를 담당합니다.
- **`chat.ts`**: 일반 챗봇 및 설정 분석 요청과 모델 파라미터 전달을 처리합니다.

---

## 4. UI 시스템 및 스타일 (`src/components/ui/`)

이 폴더에는 **48개의 전문 UI 컴포넌트**가 들어있습니다. 
- `button.tsx`, `card.tsx`, `dialog.tsx` 등은 프로젝트 전체에서 일관된 디자인(Shadcn/UI)을 유지하게 해줍니다.
- 수동으로 스타일을 입히는 대신, 이 컴포넌트들을 조립함으로써 **개발 속도와 디자인 품질**을 동시에 확보했습니다.

---

## 5. 요약: 기능별 구현 매핑

1.  **소설을 쓰고 싶을 때**: `ChapterDetail` → `NovelEditor` → `WritingToolbar`
2.  **설정 모순을 찾고 싶을 때**: `ChapterDetail` → `novel.ts` (API 호출) → `AnalysisResultModal` (결과 표시)
3.  **데이터를 안전하게 관리할 때**: `App.tsx` (루팅) → `auth.ts` (인증) → `localStorage` (세션/설정 저장)
4.  **AI와 소통하고 싶을 때**: `FloatingMenu` → `ChatBot.tsx` 또는 `CharacterChat/`

이 구조를 통해 **StoryProof**는 단순한 텍스트 편집기를 넘어, AI 기술이 집약된 **종합 창작 플랫폼**으로 기능하게 됩니다.
